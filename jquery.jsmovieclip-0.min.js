var Movieclip={_settings:{width:100,framerate:25,frames:10,url:"img/sprite.png",debug:false,callBack:null},_elmt:null,_interval:null,_cpt:0,_playing:false,_loop:false,_firstFrame:0,_lastFrame:1,_reverse:false,_timer:null,init:function(a,b){this._settings=$.extend({},this._settings,a);this._elmt=b;this._firstFrame=0;this._lastFrame=this._settings.frames-1;$(this._elmt).css({display:"block",background:"url("+this._settings.url+")"});if(this._settings.debug){$(this._elmt).prepend('<div class="frame">1</div>')}return this},reverseAnimation:function(){this._reverse=true},verseAnimation:function(){this._reverse=false},toggle:function(a){(!mc._playing?this.play(a):this.stop())},currentFrame:function(){return this._cpt+1},play:function(a){this._firstFrame=0;this._lastFrame=this._settings.frames-1;this._playing=true;this._loop=a||true;var b=this;var c=1000/this._settings.framerate;if(this._timer){clearTimeout(this._timer);this._timer=null}this._timer=setInterval(function(){b._delay(b)},c);this._delay(this)},prevFrame:function(){this._playing=false;(this._cpt>0?this.gotoAndStop(this._cpt-1):"")},nextFrame:function(){this._playing=false;(this._cpt<this._settings.frames-1?this.gotoAndStop(this._cpt+1):"")},_delay:function(a){if(a._reverse===false){(!a._loop&&a._cpt==a._lastFrame?a.stop():"");if(!a._playing){return}a._cpt=(a._cpt==a._lastFrame)?a._firstFrame:a._cpt+1}else{(!a._loop&&a._cpt==a._firstFrame?a.stop():"");if(!a._playing){return}a._cpt=(a._cpt==a._firstFrame)?a._lastFrame:a._cpt-1}$(a._elmt).each(function(){$(this).css("background-position",-(a._cpt*a._settings.width));if(a._settings.debug){$(this).children(".frame").html(a.currentFrame())}})},loop:function(e,c,a){if(this._reverse){this._firstFrame=(e-1<0)?0:e-1;this._lastFrame=((c-1)>(this._settings.frames-1))?this._settings.frames-1:c-1}else{this._firstFrame=(e-1<0)?0:e-1;this._lastFrame=((c-1)>(this._settings.frames-1))?this._settings.frames-1:c-1}this._cpt=(!this._reverse)?this._firstFrame:this._lastFrame;this._loop=a;var g=this;$(this._elmt).each(function(){$(this).css("background-position",-(g._cpt*g._settings.width))});if(!this._playing){this._playing=true;var d=1000/this._settings.framerate;if(this._timer){clearTimeout(this._timer);this._timer=null}var b=this;this._timer=setInterval(function(){b._delay(b)},d)}},stop:function(){this._firstFrame=0;this._lastFrame=this._settings.frames-1;this._playing=false;if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._settings.callBack&&typeof(this._settings.callBack)=="function"){this._settings.callBack()}},gotoAndPlay:function(b,a){b=(!this._reverse)?b-2:b;this._cpt=(b>this._settings.frames)?this._settings.frames%b:b;this.play(a)},gotoAndStop:function(a){this._cpt=(a>this._settings.frames)?this._settings.frames%a:a-1;$(this._elmt).css("background-position",-(this._cpt*this._settings.width));this.stop()}};if(typeof Object.create!=="function"){Object.create=function(b){function a(){}a.prototype=b;return new a()}}(function(a){a.fn.movieclip=function(b){if(this.length){return this.each(function(){var c=Object.create(Movieclip);c.init(b,this);a.data(this,"Movieclip",c)})}}})(jQuery);